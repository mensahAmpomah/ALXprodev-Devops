#!/bin/bash

POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_BASE_URL="https://pokeapi.co/api/v2/pokemon/"

for POKEMON in "${POKEMONS[@]}"; do
    {
        OUTPUT_FILE="${POKEMON}.json"
        HTTP_STATUS=$(curl -s -L -w "%{http_code}" "${API_BASE_URL}${POKEMON}/" -o "$OUTPUT_FILE")

        if [[ "$HTTP_STATUS" =~ ^2 ]]; then
            echo "Fetched: $POKEMON"
        else
            echo "Error fetching $POKEMON (Status: $HTTP_STATUS)"
            rm -f "$OUTPUT_FILE"
        fi
    } &
done

jobs

wait
echo "All downloads completed"
